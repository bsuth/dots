local { get_visual_selection } = require('utils.visual_mode')

-- TODO: replace with *?
vim.keymap.set('v', '<c-n>', () -> {
  vim.fn.setreg('/', "\\V{get_visual_selection():gsub('[\\/]', '\\%1')}")

  -- go back to normal mode
  vim.api.nvim_feedkeys(
    vim.api.nvim_replace_termcodes('<esc>', true, false, true),
    'n',
    false,
  )

  vim.cmd('normal n')
})
