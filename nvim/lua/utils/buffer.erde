module function buffer_keymap(buffer, mode, lhs, rhs) {
  local options = { noremap = true }

  if type(rhs) == 'function' {
    options.callback = rhs
    rhs = ''
  }

  vim.api.nvim_buf_set_keymap(buffer, mode, lhs, rhs, options)
}
